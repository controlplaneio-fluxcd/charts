# Default values for flux-instance.

nameOverride: ""
fullnameOverride: "flux"

instance:
  # -- Distribution https://fluxcd.control-plane.io/operator/fluxinstance/#distribution-configuration
  distribution: # @schema required: true
    version: "2.x" # @schema required: true
    registry: "ghcr.io/fluxcd" # @schema required: true
    artifact: "oci://ghcr.io/controlplaneio-fluxcd/flux-operator-manifests:latest"
    imagePullSecret: ""
  # -- Components https://fluxcd.control-plane.io/operator/fluxinstance/#components-configuration
  components: # @schema item: string; uniqueItems: true; itemEnum: [source-controller,kustomize-controller,helm-controller,notification-controller,image-reflector-controller,image-automation-controller]
    - source-controller
    - kustomize-controller
    - helm-controller
    - notification-controller
  # -- Cluster https://fluxcd.control-plane.io/operator/fluxinstance/#cluster-configuration
  cluster: # @schema required: true
    type: kubernetes # @schema enum:[kubernetes,openshift,aws,azure,gcp]
    multitenant: false # @schema required: true
    networkPolicy: true # @schema required: true
    domain: "cluster.local" # @schema required: true
  # -- Storage https://fluxcd.control-plane.io/operator/fluxinstance/#storage-configuration
  storage: # @schema required: false
    class: ""
    size: ""
  # -- Sync https://fluxcd.control-plane.io/operator/fluxinstance/#sync-configuration
  sync: # @schema required: false
    kind: "GitRepository" # @schema enum:[GitRepository,OCIRepository,Bucket]
    url: ""
    ref: ""
    path: ""
    pullSecret: ""
  kustomize: # @schema required: false
    # -- Patches https://fluxcd.control-plane.io/operator/fluxinstance/#kustomize-patches
    patches: # @schema item: object
      - target:
          kind: Deployment
          name: "(kustomize-controller|helm-controller)"
        patch: |
          - op: add
            path: /spec/template/spec/containers/0/args/-
            value: --concurrent=10
          - op: add
            path: /spec/template/spec/containers/0/args/-
            value: --requeue-dependency=10s

# -- Common annotations to add to all deployed objects including pods.
commonAnnotations: { }

# -- Common labels to add to all deployed objects including pods.
commonLabels: { }
